<script>
  const startBtn = document.getElementById('start-btn');
  const imageContainer = document.getElementById('image-container');
  const message = document.getElementById('message');
  const introText = document.getElementById('intro-text');
  const TEMPO_LIMITE = 60000; // 1 minuto em milissegundos

  function mostrarImagem(tempoRestante) {
    startBtn.style.display = 'none';
    introText.remove();
    message.textContent = '';
    imageContainer.innerHTML = '';

    const img = document.createElement('img');
    img.src = 'https://i.imgur.com/61RMiPT.png';
    img.alt = 'Imagem de observação';
    img.onerror = () => {
      message.textContent = 'Falha ao carregar a imagem.';
    };
    imageContainer.appendChild(img);

    setTimeout(() => {
      imageContainer.innerHTML = '';
      message.textContent = 'A imagem não está mais disponível.';
    }, tempoRestante);
  }

  function mostrarFinal() {
    startBtn.style.display = 'none';
    introText.remove();
    imageContainer.innerHTML = '';
    message.textContent = 'A imagem não está mais disponível.';
  }

  function verificarEstado() {
    const inicio = localStorage.getItem('inicioVisualizacao');
    if (inicio) {
      const tempoPassado = Date.now() - parseInt(inicio);
      if (tempoPassado >= TEMPO_LIMITE) {
        mostrarFinal();
      } else {
        mostrarImagem(TEMPO_LIMITE - tempoPassado);
      }
    }
  }

  startBtn.addEventListener('click', () => {
    localStorage.setItem('inicioVisualizacao', Date.now());
    mostrarImagem(TEMPO_LIMITE);
  });

  verificarEstado();
</script>
